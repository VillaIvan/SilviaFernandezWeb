---
import CounterUp from "./CounterUp.astro";
---

<section
  class="max-w-7xl mx-auto flex flex-col gap-10 md:gap-4 md:flex-row justify-around items-center my-20 md:mt-0"
>
  <div
    class="w-72 text-center bg-white py-8 px-6 rounded-lg sm:px-10 border border-secondary border-opacity-40"
  >
    <CounterUp dataVal="20" text="Colaboradores" />
  </div>
  <div
    class="w-72 text-center bg-white py-8 px-6 rounded-lg sm:px-10 border border-secondary border-opacity-40"
  >
    <CounterUp dataVal="3500" text="Clientes" />
  </div>
  <div
    class="w-72 text-center bg-white py-8 px-6 rounded-lg sm:px-10 border border-secondary border-opacity-40"
  >
    <CounterUp dataVal="28" text="Aseguradoras" />
  </div>
  <script>
    let valueDisplays = document.querySelectorAll(".num");
    let interval = 5000;

    valueDisplays.forEach((valueDisplay) => {
      let startValue = 0;
      let endValue = parseInt(valueDisplay.getAttribute("data-val"));
      if (isNaN(endValue)) {
        console.error(
          "El atributo data-val no es un número válido:",
          valueDisplay
        );
        return;
      }
      let duration = Math.floor(interval / endValue);

      let counter = setInterval(() => {
        startValue += 1;
        valueDisplay.textContent = "+" + startValue.toString();
        if (startValue === endValue) {
          clearInterval(counter);
        }
      }, duration);
    });
  </script>
</section>
